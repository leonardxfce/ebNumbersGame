language: php
sudo: false
php:
  - '7.1'
addons:
  sonarcloud:
    organization: "leonardxfce-github"
    token:
      secure: $SONAR_TOKEN
script:
  - composer install
  - mkdir -p build/logs
  - php vendor/bin/phpunit -c phpunit.xml.dist
  - composer test
  - sonar-scanner
after_success:
  - travis_retry php vendor/bin/php-coveralls -v